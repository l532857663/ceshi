
create database data_analysis_web_server;

###用户表：用户的个人信息
create table `users` (
`users_id` INT(10) UNSIGNED AUTO_INCREMENT,
`users_number` VARCHAR(50) NOT NULL UNIQUE,
`users_username` VARCHAR(20) NOT NULL UNIQUE,
`users_password` VARCHAR(50) NOT NULL,
`users_name` VARCHAR(50) NOT NULL,
`roles_number` INT(10) NOT NULL,
`roles_level` INT(1) NOT NULL,
`unit_identification` VARCHAR(50) NOT NULL,
`department_identification` VARCHAR(50) NOT NULL,
`employee_identification` VARCHAR(50) NOT NULL,
PRIMARY KEY ( `user_id` )
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

***********************************************************

###角色表：用户的角色信息，什么身份对应什么权限
create table `roles` (
`roles_id` INT(10) UNSIGNED AUTO_INCREMENT,
`roles_number` INT(10) NOT NULL UNIQUE,
`roles_name` VARCHAR(20) NOT NULL,
`roles_description` VARCHAR(200),
`roles_level` INT(1) NOT NULL,
PRIMARY KEY ( `role_id` )
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

###模块表：server的各个模块信息
create table `modules` (
`modules_id` INT(10) UNSIGNED AUTO_INCREMENT,
`modules_number` INT(10) NOT NULL UNIQUE,
`modules_name` VARCHAR(20) NOT NULL,
PRIMARY KEY ( `modules_id` ),
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

###
CRUD 
0无操作 -> 0000
1读取 	-> 0001
2增加   -> 0010
4修改 	-> 0100
8删除 	-> 1000
角色和模块的对应权限关系
create table `role_modules` (
`rm_id` INT(10) UNSIGNED AUTO_INCREMENT,
`roles_number` INT(10) NOT NULL,
`modules_number` INT(10) NOT NULL,
`rm_crud` INT(4) NOT NULL,
PRIMARY KEY ( `modules_id` ),
UNIQUE KEY ( `roles_number`,`modules_number` )
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

************************************************************

###案件管理表：案件相关信息
create table `cases_management` (
`cases_id` INT(10) UNSIGNED AUTO_INCREMENT,
`cases_number` VARCHAR(50) NOT NULL UNIQUE,
`cases_name` VARCHAR(50) NOT NULL,
`cases_title` VARCHAR(200) NOT NULL,
`cases_author` VARCHAR(50) NOT NULL,
PRIMARY KEY ( `cases_id` )
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

###文件管理表：文件相关信息
create table `files_management` (
`files_id` INT(10) UNSIGNED AUTO_INCREMENT,
`files_number` VARCHAR(50) NOT NULL UNIQUE,
`files_source_name` VARCHAR(200) NOT NULL,
`files_save_name` VARCHAR(200) NOT NULL,
`files_save_path` TEXT NOT NULL,
`files_author` VARCHAR(20) NOT NULL,
`files_creation_time` INT(10) NOT NULL,
PRIMARY KEY ( `files_id` )
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

###用户<=>案件表<=>上传文件：用户和案件和文件对应关系
create table `user_case_file` (
`ucf_id` INT(10) UNSIGNED AUTO_INCREMENT,
`users_number` VARCHAR(50) NOT NULL,
`cases_number` VARCHAR(50) NOT NULL,
`files_number` VARCHAR(50) NOT NULL,
`users_name` VARCHAR(50) NOT NULL,
`cases_name` VARCHAR(50) NOT NULL,
`files_source_name` VARCHAR(50) NOT NULL,
PRIMARY KEY ( `uc_id` ),
UNIQUE KEY ( `user_number`,`cases_number`,`files_number` )
)ENGINE=InnoDB DEFAULT CHARSET=utf8;

************************************************************

<table>			<row_key>								<family>:<column>  		
users			'users_'+users_username				   *userinfo:users_number
														userinfo:users_username
														userinfo:users_password
														userinfo:users_name
													   *userinfo:roles_number
													    userinfo:roles_level
														...
														
roles			'roles_'+roles_number				   *roleinfo:roles_number
													    roleinfo:roles_level
														roleinfo:roles_name
														roleinfo:roles_description
														...
                                                        
modules			'modules_'+modules_number			   *modulesinfo:modules_number
														modulesinfo:modules_name
														...
                
role_module 	'rm_'+roles_number+'_'+modules_number  *rminfo:roles_number
													   *rminfo:modules_number
														rminfo:rm_crud
														...
                
cases			'cases_'+cases_number				   *caseinfo:cases_number
														caseinfo:cases_name
														caseinfo:cases_title
														caseinfo:cases_author
														...
                
files			'files_'+files_number				   *fileinfo:files_number
														fileinfo:files_source_name
														fileinfo:files_save_name
														fileinfo:files_save_path
														fileinfo:files_author
														fileinfo:files_creation_time
														...

user_case_file	'ucf_'+users_number+'_'+cases_number+'_'+files_number
													   *ucfinfo:users_number
													   *ucfinfo:cases_number
													   *ucfinfo:files_number
														ucfinfo:users_name
														ucfinfo:cases_name
														ucfinfo:files_source_name


